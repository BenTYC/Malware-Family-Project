# Malware-Family-Project
===

Overview 
---
Some malwares grouping researches take advantage of well-labeled malware families and focus on proposing better methods to classify malwares. However, in real scenario, we often face unknown malwares or some variants of malwares. One purpose of the project is towards clustering unknown malwares by profiling their system calls numbers. In addition, we want to find the key system calls that can be used to classify malware family.

1. Problem Definition:
Group same behaviors into a malware family becomes a critical issue in malware detection and defense. One purpose of this paper is to propose a convincing clustering structure based on profiling the runtime behavior of malwares in terms of system calls numbers. Then, the Silhouette analysis [4] and sum of square are proposed to evaluate the goodness of different malware family clustering results.
The second purpose is training a more accurate classifier for malware family classification based on system calls behavior. In addition, we want to extract the key system calls that can be used for malware family classification effectively.
Our study provides a solution includes router behavior profiling, behavior clustering and clustering evaluation and key system call selection. Which are different from most of the previous works in malware detection or behavior analysis.
To be more specific, there are four main issue that this paper deal with.
(1) V alidate the observations from previous paper [1]: if infected routers exhibit an initial spike and an overall 50% increase in the number of system calls.
(2) Clustering distinct groups of malwares based on profiling the runtime behavior of malwares in terms of system calls numbers. This analysis could suggest the convincing cluster number of malwares.
(3) Malware family Classification by nearest neighbor based on system calls.In addition, implement the feature selection algorithm—forward search to find the key system calls that classify the malware family most effectively.
(4) Building the process tree for profiling by the degree of the process. Let’s in different architecture, when some unknown malware come into the specific architecture, could we identify to some family?

2. Contributions:
We propose to develop a method to
Analyze router behavior by profiling the system calls numbers. Specifically, our contributions are expected to be:
(1) Show that if infected routers exhibit an initial spike and an overall 50% increase in the number of system calls by proposing the profiling work. And find some new information.
(2) Propose the convincing cluster numbers among malwares of BE (MIPS, Big- Endian) based on their system calls profiling.
(3) Propose the key features for classifying malware family with the corresponding accuracy.
(4) Propose the process tree to identify the unknown malware in different architecture.

The rest of this paper is structured as follows. In section 2, we review some previous works relevant to malware analysis, definition of behaviors, K-Means clustering, Feature Selection algorithm and Nearest Neighbor. In section 3, we introduce the raw data produced by RARE which is the input of this research. In section 4, we demonstrate all the analysis results. In section 5, discuss the results. In section 6, give the conclusions.

Reference
---
[1] Darki, A., Duff, A., Qian, Z., Naik, G., Mancoridis, S., & Faloutsos, M. Don’t Trust Your Router: Detecting Compromised Routers. Proceedings of the 2016 ACM
[2] Ahmad Darki, Chun-Yu Chuang, Michalis Faloutsos, Zhiyun Qian, Heng Yin, RARE: A Systematic Augmented Router Emulation for Malware Analysis. (to appear) Passive and Active Measurement(PAM) 2018
[3] Hsiao, S. W., Sun, Y. S., & Chen, M. C. (2017). Virtual Machine Introspection Based Malware Behavior Profiling and Family Grouping. arXiv preprint arXiv:1705.01697.
[4] Peter J. Rousseeuw. “Silhouettes: a Graphical Aid to the Interpretation and Validation of Cluster Analysis”. Computational and Applied Mathematics, 1987, 20: 53–65
